<!DOCTYPE html>
<html lang="en">
<head>
    <title>MediaSDK Plannning Poker【投票者用】</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.4.1/font/bootstrap-icons.css">
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://unpkg.com/phosphor-icons"></script>
</head>
<body>
    <header>
        <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
          <div class="container">
            <a class="navbar-brand" href="#">MediaSDK Plannning Poker</a>
          </div>
        </nav>
    </header>

    <br><br>

    <!-- Main Content -->
    <section class="main-content">
        <div class="container">
            <div class="row">
              <div class="col-sm-3 text-end">
                <!-- ここに名前を書き込んでください -->
                <input class="form-control" type="text" id="name">
                <!-- ここに名前を書き込んでください -->
              </div>
              <div class="col-sm-6">
                <select class="form-select" id="point" aria-label="Default select example">
                  <option value="0">0</option>
                  <option value="1">1</option>
                  <option value="2">2</option>
                  <option value="3">3</option>
                  <option value="5">5</option>
                  <option value="8">8</option>
                  <option value="13">13</option>
                  <option value="20">20</option>
                </select>
              </div>
              <div class="col-sm-3">
                  <button type="button" class="btn btn-primary" id="done">決定</button>
              </div>
            </div>
        </div>
    </section>

    <!-- Footer Section -->
    <footer></footer>

    <!-- jQuery JS -->
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js"></script>
    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Firebase -->
    <script type="module">
      // Import the functions you need from the SDKs you need
      import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js";
      import { getDatabase, ref, set, update } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-database.js";
      // TODO: Add SDKs for Firebase products that you want to use
      // https://firebase.google.com/docs/web/setup#available-libraries
    
      // Your web app's Firebase configuration
      const firebaseConfig = {
        apiKey: "AIzaSyC-QLp4ZZL86GVnc0amref5ni49ckYggCI",
        authDomain: "vplanningpoker.firebaseapp.com",
        projectId: "vplanningpoker",
        storageBucket: "vplanningpoker.appspot.com",
        messagingSenderId: "735223033322",
        appId: "1:735223033322:web:022d55a05beb35054ad693"
      };
    
      // Initialize Firebase
      const app = initializeApp(firebaseConfig);
      var database;
      var reference;


      $('#done').click(() => {
        var p = $('#point').val();
        if (p > 0) {
          database = new getDatabase(app);
          var name = $('#name').val();
          reference = ref(database, name);
          console.log(reference);
          set(reference, p);
          // if (reference.exists()) {
          //   set(reference, p);
          //   console.log("reference exist!");
          // }else {
          //   var newUser = reference.push();
          //   newUser.set(name, p);
          //   console.log("reference not exist!");
          // }
        }
      });
    </script>
</body>
</html>